{
  "dead_imports": [
    {
      "line": 7,
      "module": "annotations",
      "statement": "from __future__ import annotations"
    },
    {
      "line": 11,
      "module": "Optional",
      "statement": "from typing import Dict, List, Optional"
    },
    {
      "line": 15,
      "module": "MCPClient",
      "statement": "from mcp import MCPClient, default_client"
    }
  ],
  "commented_blocks": [],
  "empty_functions": [],
  "unused_variables": [],
  "all_functions": [
    {
      "name": "call_mcp_tool",
      "line": 21,
      "code": "@tool\ndef call_mcp_tool(server: str, tool_name: str, payload: Dict) -> str:\n    \"\"\"\n    Call a tool from an MCP server.\n    \n    Args:\n        server: MCP server identifier (e.g., 'alpaca-trading', 'trade-agent')\n        tool_name: Name of the tool to call on the server\n        payload: Dictionary of parameters for the tool\n    \n    Returns:\n        JSON string with the tool's response\n    \"\"\"\n    try:\n        mcp_client = default_client()\n        response = mcp_client.call_tool(server=server, tool=tool_name, payload=payload)\n        return json.dumps(response, indent=2)\n    except Exception as e:\n        logger.exception(f'Error calling MCP tool {server}.{tool_name}')\n        return json.dumps({'error': str(e)})"
    },
    {
      "name": "get_mcp_servers",
      "line": 47,
      "code": "@tool\ndef get_mcp_servers() -> str:\n    \"\"\"\n    List all available MCP servers and their tools.\n    \n    Returns:\n        JSON string listing all registered MCP servers and their available tools\n    \"\"\"\n    try:\n        from mcp.registry import load_registry\n        registry = load_registry()\n        servers_info = []\n        for server_config in registry.servers:\n            servers_info.append({'id': server_config['id'], 'display_name': server_config.get('display_name', server_config['id']), 'tools': list(server_config.get('tools', {}).keys())})\n        return json.dumps({'servers': servers_info}, indent=2)\n    except Exception as e:\n        logger.exception('Error listing MCP servers')\n        return json.dumps({'error': str(e)})"
    },
    {
      "name": "build_mcp_tools_for_deepagents",
      "line": 75,
      "code": "def build_mcp_tools_for_deepagents() -> List:\n    \"\"\"\n    Build MCP-related tools for deepagents.\n    \n    Returns:\n        List of MCP tool objects compatible with deepagents\n    \"\"\"\n    return [call_mcp_tool, get_mcp_servers]"
    }
  ]
}
