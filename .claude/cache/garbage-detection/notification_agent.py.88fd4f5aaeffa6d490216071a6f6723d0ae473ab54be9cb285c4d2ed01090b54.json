{
  "dead_imports": [
    {
      "line": 14,
      "module": "List",
      "statement": "from typing import Dict, List, Any, Optional"
    },
    {
      "line": 14,
      "module": "Optional",
      "statement": "from typing import Dict, List, Any, Optional"
    }
  ],
  "commented_blocks": [],
  "empty_functions": [],
  "unused_variables": [
    {
      "line": 24,
      "variable": "SLACK"
    },
    {
      "line": 25,
      "variable": "EMAIL"
    },
    {
      "line": 26,
      "variable": "SMS"
    },
    {
      "line": 27,
      "variable": "DASHBOARD"
    },
    {
      "line": 28,
      "variable": "LOG"
    },
    {
      "line": 33,
      "variable": "LOW"
    },
    {
      "line": 34,
      "variable": "MEDIUM"
    },
    {
      "line": 35,
      "variable": "HIGH"
    },
    {
      "line": 36,
      "variable": "CRITICAL"
    },
    {
      "line": 138,
      "variable": "slack_payload"
    },
    {
      "line": 171,
      "variable": "email_payload"
    },
    {
      "line": 202,
      "variable": "dashboard_data"
    }
  ],
  "all_functions": [
    {
      "name": "__init__",
      "line": 50,
      "code": "def __init__(self):\n    super().__init__(name='NotificationAgent', role='Multi-Channel Notification Coordinator')\n    self.enabled_channels = os.getenv('NOTIFICATION_CHANNELS', 'email,dashboard,log').split(',')"
    },
    {
      "name": "analyze",
      "line": 60,
      "code": "def analyze(self, data: Dict[str, Any]) -> Dict[str, Any]:\n    \"\"\"\n        Send a notification.\n        \n        Args:\n            data: Notification data with message, channels, priority\n            \n        Returns:\n            Notification result\n        \"\"\"\n    message = data.get('message', '')\n    channels = data.get('channels', self.enabled_channels)\n    priority = data.get('priority', NotificationPriority.MEDIUM.value)\n    notification_type = data.get('type', 'info')\n    context = data.get('context', {})\n    if not message:\n        return {'success': False, 'error': 'message required'}\n    results = []\n    for channel in channels:\n        try:\n            if channel == 'slack':\n                result = self._send_slack_notification(message, priority, context)\n            elif channel == 'email':\n                result = self._send_email_notification(message, priority, context)\n            elif channel == 'dashboard':\n                result = self._update_dashboard(message, notification_type, context)\n            elif channel == 'log':\n                result = self._log_notification(message, priority, context)\n            else:\n                result = {'success': False, 'error': f'Unknown channel: {channel}'}\n            results.append({'channel': channel, **result})\n        except Exception as e:\n            logger.error(f'Notification failed for {channel}: {e}')\n            results.append({'channel': channel, 'success': False, 'error': str(e)})\n    success_count = sum((1 for r in results if r.get('success')))\n    return {'success': success_count > 0, 'total_channels': len(channels), 'successful_channels': success_count, 'results': results}"
    },
    {
      "name": "_send_slack_notification",
      "line": 121,
      "code": "def _send_slack_notification(self, message: str, priority: str, context: Dict[str, Any]) -> Dict[str, Any]:\n    \"\"\"\n        Send Slack notification via MCP.\n        \n        Args:\n            message: Notification message\n            priority: Priority level\n            context: Additional context\n            \n        Returns:\n            Send result\n        \"\"\"\n    logger.info(f'Slack notification ({priority}): {message[:100]}...')\n    slack_payload = {'channel': context.get('slack_channel', '#trading-alerts'), 'message': message, 'priority': priority, 'timestamp': datetime.now().isoformat(), **context}\n    return {'success': True, 'channel': 'slack', 'message_id': f'slack_{datetime.now().timestamp()}'}"
    },
    {
      "name": "_send_email_notification",
      "line": 154,
      "code": "def _send_email_notification(self, message: str, priority: str, context: Dict[str, Any]) -> Dict[str, Any]:\n    \"\"\"\n        Send email notification via MCP.\n        \n        Args:\n            message: Notification message\n            priority: Priority level\n            context: Additional context\n            \n        Returns:\n            Send result\n        \"\"\"\n    logger.info(f'Email notification ({priority}): {message[:100]}...')\n    email_payload = {'to': context.get('recipients', [os.getenv('ALERT_EMAIL', '')]), 'subject': f'[{priority.upper()}] Trading System Alert', 'body': message, 'priority': priority, 'timestamp': datetime.now().isoformat()}\n    return {'success': True, 'channel': 'email', 'message_id': f'email_{datetime.now().timestamp()}'}"
    },
    {
      "name": "_update_dashboard",
      "line": 187,
      "code": "def _update_dashboard(self, message: str, notification_type: str, context: Dict[str, Any]) -> Dict[str, Any]:\n    \"\"\"\n        Update dashboard with notification.\n        \n        Args:\n            message: Notification message\n            notification_type: Type of notification\n            context: Additional context\n            \n        Returns:\n            Update result\n        \"\"\"\n    logger.info(f'Dashboard update ({notification_type}): {message[:100]}...')\n    dashboard_data = {'message': message, 'type': notification_type, 'timestamp': datetime.now().isoformat(), **context}\n    return {'success': True, 'channel': 'dashboard', 'message_id': f'dashboard_{datetime.now().timestamp()}'}"
    },
    {
      "name": "_log_notification",
      "line": 218,
      "code": "def _log_notification(self, message: str, priority: str, context: Dict[str, Any]) -> Dict[str, Any]:\n    \"\"\"\n        Log notification to file.\n        \n        Args:\n            message: Notification message\n            priority: Priority level\n            context: Additional context\n            \n        Returns:\n            Log result\n        \"\"\"\n    log_entry = {'timestamp': datetime.now().isoformat(), 'priority': priority, 'message': message, **context}\n    logger.info(f'Notification logged: {json.dumps(log_entry)}')\n    return {'success': True, 'channel': 'log', 'message_id': f'log_{datetime.now().timestamp()}'}"
    },
    {
      "name": "send_trade_alert",
      "line": 245,
      "code": "def send_trade_alert(self, trade_data: Dict[str, Any]):\n    \"\"\"Send trade execution alert.\"\"\"\n    message = f\"Trade Executed: {trade_data.get('symbol')} {trade_data.get('side', '').upper()} {trade_data.get('quantity')} shares @ ${trade_data.get('price', 0):.2f}\"\n    return self.analyze({'message': message, 'channels': ['email', 'dashboard'], 'priority': NotificationPriority.MEDIUM.value, 'type': 'trade', 'context': trade_data})"
    },
    {
      "name": "send_risk_alert",
      "line": 261,
      "code": "def send_risk_alert(self, risk_data: Dict[str, Any]):\n    \"\"\"Send risk management alert.\"\"\"\n    message = f\"Risk Alert: {risk_data.get('alert_type')} - {risk_data.get('message', 'Risk threshold exceeded')}\"\n    return self.analyze({'message': message, 'channels': ['email'], 'priority': NotificationPriority.HIGH.value, 'type': 'risk', 'context': risk_data})"
    },
    {
      "name": "send_approval_request",
      "line": 276,
      "code": "def send_approval_request(self, approval_data: Dict[str, Any]):\n    \"\"\"Send approval request notification.\"\"\"\n    message = f\"Approval Required: {approval_data.get('type')} - {approval_data.get('description', 'Human approval needed')}\"\n    return self.analyze({'message': message, 'channels': ['email'], 'priority': NotificationPriority.CRITICAL.value, 'type': 'approval', 'context': approval_data})"
    }
  ]
}
