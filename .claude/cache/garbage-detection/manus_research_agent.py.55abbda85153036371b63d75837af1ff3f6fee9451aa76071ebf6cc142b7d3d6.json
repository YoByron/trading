{
  "dead_imports": [],
  "commented_blocks": [],
  "empty_functions": [],
  "unused_variables": [],
  "all_functions": [
    {
      "name": "__init__",
      "line": 41,
      "code": "def __init__(self, use_manus: bool=True):\n    \"\"\"\n        Initialize Manus-enhanced research agent.\n        \n        Args:\n            use_manus: Whether to use Manus API (defaults to True if available)\n        \"\"\"\n    super().__init__(name='ManusResearchAgent', role='Autonomous multi-source stock research with Manus API')\n    self.use_manus = use_manus and MANUS_AVAILABLE\n    if self.use_manus:\n        try:\n            self.manus_client = get_manus_client()\n            logger.info('Manus API client initialized for research agent')\n        except Exception as e:\n            logger.warning(f'Failed to initialize Manus client: {e}')\n            self.use_manus = False\n            self.manus_client = None\n    else:\n        self.manus_client = None\n        if not MANUS_AVAILABLE:\n            logger.warning('Manus not available - agent will use fallback methods')"
    },
    {
      "name": "analyze",
      "line": 68,
      "code": "def analyze(self, data: Dict[str, Any]) -> Dict[str, Any]:\n    \"\"\"\n        Analyze stock using Manus autonomous research.\n        \n        Args:\n            data: Contains symbol, optional research_type, include_competitors\n            \n        Returns:\n            Research analysis with investment thesis\n        \"\"\"\n    symbol = data.get('symbol', 'UNKNOWN')\n    research_type = data.get('research_type', 'comprehensive')\n    include_competitors = data.get('include_competitors', False)\n    wait_for_completion = data.get('wait_for_completion', True)\n    if not self.use_manus or not self.manus_client:\n        logger.warning(f'Manus not available, using fallback for {symbol}')\n        return self._fallback_analysis(data)\n    try:\n        logger.info(f'Starting Manus research for {symbol} ({research_type})')\n        result = self.manus_client.research_stock(symbol=symbol, research_type=research_type, include_competitors=include_competitors, wait_for_completion=wait_for_completion)\n        analysis = self._parse_manus_results(result, symbol)\n        self.log_decision(analysis)\n        return analysis\n    except Exception as e:\n        logger.error(f'Manus research failed for {symbol}: {e}')\n        return self._fallback_analysis(data)"
    },
    {
      "name": "compare_stocks",
      "line": 111,
      "code": "def compare_stocks(self, symbols: list, metrics: Optional[list]=None) -> Dict[str, Any]:\n    \"\"\"\n        Compare multiple stocks using Manus.\n        \n        Args:\n            symbols: List of stock ticker symbols\n            metrics: Optional list of metrics to compare\n            \n        Returns:\n            Comparison analysis\n        \"\"\"\n    if not self.use_manus or not self.manus_client:\n        raise ValueError('Manus not available for stock comparison')\n    try:\n        logger.info(f\"Comparing stocks: {', '.join(symbols)}\")\n        result = self.manus_client.compare_stocks(symbols=symbols, metrics=metrics)\n        return {'symbols': symbols, 'status': 'completed', 'comparison': result.get('comparison', ''), 'raw_result': result}\n    except Exception as e:\n        logger.error(f'Manus stock comparison failed: {e}')\n        raise"
    },
    {
      "name": "_parse_manus_results",
      "line": 144,
      "code": "def _parse_manus_results(self, result: Dict[str, Any], symbol: str) -> Dict[str, Any]:\n    \"\"\"\n        Parse Manus research results into ResearchAgent-compatible format.\n        \n        Args:\n            result: Manus API result\n            symbol: Stock symbol\n            \n        Returns:\n            Parsed analysis in expected format\n        \"\"\"\n    analysis_text = result.get('analysis', '')\n    analysis = {'strength': 5, 'sentiment': 0.0, 'thesis': analysis_text[:500] if analysis_text else 'Analysis completed', 'action': 'HOLD', 'confidence': 0.7, 'risks': 'See full analysis', 'full_reasoning': analysis_text, 'manus_result': result}\n    analysis_text_lower = analysis_text.lower()\n    if 'buy' in analysis_text_lower and 'strong buy' in analysis_text_lower:\n        analysis['action'] = 'BUY'\n        analysis['confidence'] = 0.8\n    elif 'buy' in analysis_text_lower:\n        analysis['action'] = 'BUY'\n        analysis['confidence'] = 0.7\n    elif 'sell' in analysis_text_lower:\n        analysis['action'] = 'SELL'\n        analysis['confidence'] = 0.7\n    elif 'hold' in analysis_text_lower:\n        analysis['action'] = 'HOLD'\n        analysis['confidence'] = 0.6\n    if 'positive' in analysis_text_lower or 'bullish' in analysis_text_lower:\n        analysis['sentiment'] = 0.5\n    elif 'negative' in analysis_text_lower or 'bearish' in analysis_text_lower:\n        analysis['sentiment'] = -0.5\n    import re\n    strength_match = re.search('(?:strength|rating|score)[:\\\\s]+(\\\\d+)', analysis_text_lower)\n    if strength_match:\n        try:\n            analysis['strength'] = int(strength_match.group(1))\n        except:\n            pass\n    return analysis"
    },
    {
      "name": "_fallback_analysis",
      "line": 206,
      "code": "def _fallback_analysis(self, data: Dict[str, Any]) -> Dict[str, Any]:\n    \"\"\"\n        Fallback analysis when Manus is not available.\n        \n        Uses basic LLM reasoning similar to standard ResearchAgent.\n        \"\"\"\n    symbol = data.get('symbol', 'UNKNOWN')\n    prompt = f'Analyze {symbol} stock with available data.\\n\\nProvide:\\n1. Fundamental strength (1-10)\\n2. Sentiment score (-1 to +1)\\n3. Investment thesis (2-3 sentences)\\n4. Recommendation: BUY / SELL / HOLD\\n5. Confidence (0-1)\\n6. Key risks\\n\\nNote: This is a fallback analysis. For comprehensive research, use Manus API.\\n'\n    response = self.reason_with_llm(prompt)\n    return {'strength': 5, 'sentiment': 0.0, 'thesis': response.get('reasoning', 'Analysis completed'), 'action': 'HOLD', 'confidence': 0.5, 'risks': 'Limited data available', 'full_reasoning': response.get('reasoning', ''), 'fallback': True}"
    }
  ]
}
