{
  "dead_imports": [
    {
      "line": 13,
      "module": "datetime",
      "statement": "from datetime import datetime"
    }
  ],
  "commented_blocks": [],
  "empty_functions": [],
  "unused_variables": [],
  "all_functions": [
    {
      "name": "generate_report",
      "line": 57,
      "code": "def generate_report(self) -> str:\n    \"\"\"\n        Generate a comprehensive human-readable text report of backtest results.\n\n        Returns:\n            Formatted string containing backtest summary and metrics\n        \"\"\"\n    report_lines = ['=' * 80, 'BACKTEST RESULTS SUMMARY', '=' * 80, '', 'PERIOD INFORMATION', '-' * 80, f'Start Date:        {self.start_date}', f'End Date:          {self.end_date}', f'Trading Days:      {self.trading_days}', '', 'CAPITAL & RETURNS', '-' * 80, f'Initial Capital:   ${self.initial_capital:,.2f}', f'Final Capital:     ${self.final_capital:,.2f}', f'Total Return:      ${self.final_capital - self.initial_capital:,.2f} ({self.total_return:.2f}%)', f'Annualized Return: {self._calculate_annualized_return():.2f}%', '', 'RISK METRICS', '-' * 80, f'Sharpe Ratio:      {self.sharpe_ratio:.2f}', f'Max Drawdown:      {self.max_drawdown:.2f}%', f'Volatility:        {self._calculate_volatility():.2f}%', '', 'TRADE STATISTICS', '-' * 80, f'Total Trades:      {self.total_trades}', f'Profitable Trades: {self.profitable_trades}', f'Losing Trades:     {self.total_trades - self.profitable_trades}', f'Win Rate:          {self.win_rate:.2f}%', f'Avg Trade Return:  {self.average_trade_return:.2f}%', '', 'PERFORMANCE SUMMARY', '-' * 80]\n    rating = self._get_performance_rating()\n    report_lines.append(f'Overall Rating:    {rating}')\n    report_lines.append('')\n    if self.trades:\n        report_lines.append('RECENT TRADES (Last 5)')\n        report_lines.append('-' * 80)\n        for trade in self.trades[-5:]:\n            symbol = trade.get('symbol', 'N/A')\n            date = trade.get('date', 'N/A')\n            amount = trade.get('amount', 0.0)\n            price = trade.get('price', 0.0)\n            report_lines.append(f'  {date}: BUY {symbol} @ ${price:.2f} (${amount:.2f})')\n        report_lines.append('')\n    report_lines.append('=' * 80)\n    return '\\n'.join(report_lines)"
    },
    {
      "name": "_calculate_annualized_return",
      "line": 123,
      "code": "def _calculate_annualized_return(self) -> float:\n    \"\"\"\n        Calculate annualized return based on total return and holding period.\n\n        Returns:\n            Annualized return percentage\n        \"\"\"\n    if self.trading_days == 0:\n        return 0.0\n    years = self.trading_days / 252\n    if years == 0:\n        return 0.0\n    annualized = (pow(1 + self.total_return / 100, 1 / years) - 1) * 100\n    return annualized"
    },
    {
      "name": "_calculate_volatility",
      "line": 141,
      "code": "def _calculate_volatility(self) -> float:\n    \"\"\"\n        Calculate annualized volatility of returns.\n\n        Returns:\n            Annualized volatility percentage\n        \"\"\"\n    if len(self.equity_curve) < 2:\n        return 0.0\n    daily_returns = np.diff(self.equity_curve) / self.equity_curve[:-1]\n    volatility = np.std(daily_returns) * np.sqrt(252) * 100\n    return volatility"
    },
    {
      "name": "_get_performance_rating",
      "line": 158,
      "code": "def _get_performance_rating(self) -> str:\n    \"\"\"\n        Get an overall performance rating based on key metrics.\n\n        Returns:\n            Performance rating string\n        \"\"\"\n    score = 0\n    if self.total_return > 20:\n        score += 3\n    elif self.total_return > 10:\n        score += 2\n    elif self.total_return > 5:\n        score += 1\n    if self.sharpe_ratio > 2.0:\n        score += 3\n    elif self.sharpe_ratio > 1.5:\n        score += 2\n    elif self.sharpe_ratio > 1.0:\n        score += 1\n    if self.win_rate > 65:\n        score += 3\n    elif self.win_rate > 55:\n        score += 2\n    elif self.win_rate > 50:\n        score += 1\n    if self.max_drawdown < 5:\n        score += 3\n    elif self.max_drawdown < 10:\n        score += 2\n    elif self.max_drawdown < 15:\n        score += 1\n    if score >= 10:\n        return 'EXCELLENT'\n    elif score >= 7:\n        return 'GOOD'\n    elif score >= 4:\n        return 'FAIR'\n    else:\n        return 'NEEDS IMPROVEMENT'"
    },
    {
      "name": "to_dict",
      "line": 210,
      "code": "def to_dict(self) -> Dict[str, Any]:\n    \"\"\"\n        Convert results to dictionary format for serialization.\n\n        Returns:\n            Dictionary containing all results data\n        \"\"\"\n    return {'trades': self.trades, 'equity_curve': self.equity_curve, 'dates': self.dates, 'total_return': self.total_return, 'sharpe_ratio': self.sharpe_ratio, 'max_drawdown': self.max_drawdown, 'win_rate': self.win_rate, 'total_trades': self.total_trades, 'profitable_trades': self.profitable_trades, 'average_trade_return': self.average_trade_return, 'initial_capital': self.initial_capital, 'final_capital': self.final_capital, 'start_date': self.start_date, 'end_date': self.end_date, 'trading_days': self.trading_days, 'annualized_return': self._calculate_annualized_return(), 'volatility': self._calculate_volatility(), 'performance_rating': self._get_performance_rating()}"
    },
    {
      "name": "save_to_json",
      "line": 238,
      "code": "def save_to_json(self, filepath: str) -> None:\n    \"\"\"\n        Save backtest results to a JSON file.\n\n        Args:\n            filepath: Path to save the JSON file\n        \"\"\"\n    with open(filepath, 'w') as f:\n        json.dump(self.to_dict(), f, indent=2)"
    }
  ]
}
