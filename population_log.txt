2025-11-26 16:33:38,695 - src.utils.market_data - INFO - MarketDataProvider configuration (RELIABLE FIRST):
2025-11-26 16:33:38,695 - src.utils.market_data - INFO -   - Alpaca API: ❌ disabled (PRIMARY - most reliable)
2025-11-26 16:33:38,695 - src.utils.market_data - INFO -   - Polygon.io: ❌ disabled (SECONDARY - reliable paid)
2025-11-26 16:33:38,695 - src.utils.market_data - INFO -   - Cache: dir=data/cache/alpha_vantage, ttl=21600s, max_age=7d (FAST FALLBACK)
2025-11-26 16:33:38,695 - src.utils.market_data - INFO -   - yfinance: max_retries=3 (UNRELIABLE FREE - last resort)
2025-11-26 16:33:38,695 - src.utils.market_data - INFO -   - Alpha Vantage: disabled (SLOW RATE-LIMITED - avoid)
2025-11-26 16:33:38,695 - src.utils.data_collector - INFO - DataCollector initialized: data/historical
2025-11-26 16:33:38,695 - src.utils.data_collector - INFO - Collecting data for 4 symbols with 252 days lookback
2025-11-26 16:33:38,695 - src.utils.data_collector - INFO - Fetching data for SPY...
2025-11-26 16:33:38,703 - src.utils.market_data - WARNING - SPY: Paid sources unavailable/unreliable. Trying yfinance (unreliable free source).
2025-11-26 16:34:09,091 - yfinance - ERROR -
1 Failed download:
2025-11-26 16:34:09,091 - yfinance - ERROR - ['SPY']: Timeout('Failed to perform, curl: (28) Connection timed out after 30002 milliseconds. See https://curl.se/libcurl/c/libcurl-errors.html first for more details.')
2025-11-26 16:34:09,555 - src.utils.market_data - WARNING - SPY: Alpha Vantage fallback unavailable (ALPHA_VANTAGE_API_KEY not configured).
2025-11-26 16:34:09,555 - src.utils.market_data - WARNING - SPY: All live data sources failed. Attempting to use cached data.
2025-11-26 16:34:09,556 - src.utils.data_collector - ERROR - Error collecting data for SPY: Failed to fetch 252 days of data for SPY from all sources:

2025-11-26 16:34:09,556 - src.utils.data_collector - INFO - Fetching data for QQQ...
2025-11-26 16:34:09,557 - src.utils.market_data - WARNING - QQQ: Paid sources unavailable/unreliable. Trying yfinance (unreliable free source).
2025-11-26 16:34:10,352 - src.utils.market_data - WARNING - QQQ: Alpha Vantage fallback unavailable (ALPHA_VANTAGE_API_KEY not configured).
2025-11-26 16:34:10,352 - src.utils.market_data - WARNING - QQQ: All live data sources failed. Attempting to use cached data.
2025-11-26 16:34:10,354 - src.utils.data_collector - ERROR - Error collecting data for QQQ: Failed to fetch 252 days of data for QQQ from all sources:

2025-11-26 16:34:10,354 - src.utils.data_collector - INFO - Fetching data for VOO...
2025-11-26 16:34:10,356 - src.utils.market_data - WARNING - VOO: Paid sources unavailable/unreliable. Trying yfinance (unreliable free source).
2025-11-26 16:34:11,515 - src.utils.market_data - WARNING - VOO: Alpha Vantage fallback unavailable (ALPHA_VANTAGE_API_KEY not configured).
2025-11-26 16:34:11,515 - src.utils.market_data - WARNING - VOO: All live data sources failed. Attempting to use cached data.
2025-11-26 16:34:11,516 - src.utils.data_collector - ERROR - Error collecting data for VOO: Failed to fetch 252 days of data for VOO from all sources:

2025-11-26 16:34:11,516 - src.utils.data_collector - INFO - Fetching data for BND...
2025-11-26 16:34:11,517 - src.utils.market_data - WARNING - BND: Paid sources unavailable/unreliable. Trying yfinance (unreliable free source).
2025-11-26 16:34:12,606 - src.utils.market_data - WARNING - BND: Alpha Vantage fallback unavailable (ALPHA_VANTAGE_API_KEY not configured).
2025-11-26 16:34:12,606 - src.utils.market_data - WARNING - BND: All live data sources failed. Attempting to use cached data.
2025-11-26 16:34:12,608 - src.utils.data_collector - ERROR - Error collecting data for BND: Failed to fetch 252 days of data for BND from all sources:

/Users/igorganapolsky/workspace/git/apps/trading/src/utils/data_collector.py:122: UserWarning: Could not infer format, so each element will be parsed individually, falling back to `dateutil`. To ensure parsing is consistent and as-expected, please specify a format.
  df = pd.read_csv(file, index_col=0, parse_dates=True)
2025-11-26 16:34:12,611 - src.utils.data_collector - INFO - Loaded 34 rows for SPY from 1 files
/Users/igorganapolsky/workspace/git/apps/trading/src/utils/data_collector.py:122: UserWarning: Could not infer format, so each element will be parsed individually, falling back to `dateutil`. To ensure parsing is consistent and as-expected, please specify a format.
  df = pd.read_csv(file, index_col=0, parse_dates=True)
2025-11-26 16:34:12,612 - src.utils.data_collector - INFO - Loaded 34 rows for QQQ from 1 files
/Users/igorganapolsky/workspace/git/apps/trading/src/utils/data_collector.py:122: UserWarning: Could not infer format, so each element will be parsed individually, falling back to `dateutil`. To ensure parsing is consistent and as-expected, please specify a format.
  df = pd.read_csv(file, index_col=0, parse_dates=True)
2025-11-26 16:34:12,613 - src.utils.data_collector - INFO - Loaded 27 rows for VOO from 1 files
======================================================================
Historical Data Collection for Backtesting
======================================================================

Collecting data for symbols: SPY, QQQ, VOO, BND
Lookback period: 252 days (1 year of trading data)

Note: This requires API keys to be configured.
See docs/ENVIRONMENT_VARIABLES.md for setup instructions.


======================================================================
Data collection complete!
======================================================================

Collected files:
  SPY: 34 rows (latest: SPY_2025-11-02.csv)
  QQQ: 34 rows (latest: QQQ_2025-11-02.csv)
  VOO: 27 rows (latest: VOO_2025-11-02.csv)
  BND: No files found (check API keys)

To verify data quality:
  python src/utils/data_collector.py --load SPY
