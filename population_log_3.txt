2025-11-26 16:35:31,444 - src.utils.market_data - INFO - ✅ Alpaca API initialized as PRIMARY market data source (most reliable)
2025-11-26 16:35:31,444 - src.utils.market_data - INFO - ✅ Polygon.io API available as secondary market data source
2025-11-26 16:35:31,444 - src.utils.market_data - INFO - MarketDataProvider configuration (RELIABLE FIRST):
2025-11-26 16:35:31,444 - src.utils.market_data - INFO -   - Alpaca API: ✅ enabled (PRIMARY - most reliable)
2025-11-26 16:35:31,444 - src.utils.market_data - INFO -   - Polygon.io: ✅ enabled (SECONDARY - reliable paid)
2025-11-26 16:35:31,444 - src.utils.market_data - INFO -     * Polygon retries: 3, backoff: 30s (exponential), max_data_age: 48h
2025-11-26 16:35:31,444 - src.utils.market_data - INFO -   - Cache: dir=data/cache/alpha_vantage, ttl=21600s, max_age=7d (FAST FALLBACK)
2025-11-26 16:35:31,444 - src.utils.market_data - INFO -   - yfinance: max_retries=3 (UNRELIABLE FREE - last resort)
2025-11-26 16:35:31,444 - src.utils.market_data - INFO -   - Alpha Vantage: disabled (SLOW RATE-LIMITED - avoid)
2025-11-26 16:35:31,444 - src.utils.data_collector - INFO - DataCollector initialized: data/historical
2025-11-26 16:35:31,444 - src.utils.data_collector - INFO - Collecting data for 4 symbols with 252 days lookback
2025-11-26 16:35:31,444 - src.utils.data_collector - INFO - Fetching data for SPY...
2025-11-26 16:35:31,444 - src.utils.market_data - INFO - SPY: Fetching from Polygon.io API (primary reliable source)
2025-11-26 16:35:31,761 - src.utils.market_data - INFO - SPY: Successfully fetched 120 bars from Polygon.io
2025-11-26 16:35:31,766 - src.utils.market_data - INFO - SPY: ✅ Successfully fetched from Polygon.io (120 rows, 1 attempts, 317.13ms)
2025-11-26 16:35:31,766 - src.utils.data_collector - ERROR - Error collecting data for SPY: 'MarketDataResult' object has no attribute 'empty'
2025-11-26 16:35:31,766 - src.utils.data_collector - INFO - Fetching data for QQQ...
2025-11-26 16:35:31,766 - src.utils.market_data - INFO - QQQ: Fetching from Polygon.io API (primary reliable source)
2025-11-26 16:35:31,873 - src.utils.market_data - INFO - QQQ: Successfully fetched 120 bars from Polygon.io
2025-11-26 16:35:31,875 - src.utils.market_data - INFO - QQQ: ✅ Successfully fetched from Polygon.io (120 rows, 1 attempts, 106.99ms)
2025-11-26 16:35:31,875 - src.utils.data_collector - ERROR - Error collecting data for QQQ: 'MarketDataResult' object has no attribute 'empty'
2025-11-26 16:35:31,875 - src.utils.data_collector - INFO - Fetching data for VOO...
2025-11-26 16:35:31,875 - src.utils.market_data - INFO - VOO: Fetching from Polygon.io API (primary reliable source)
2025-11-26 16:35:31,966 - src.utils.market_data - INFO - VOO: Successfully fetched 120 bars from Polygon.io
2025-11-26 16:35:31,969 - src.utils.market_data - INFO - VOO: ✅ Successfully fetched from Polygon.io (120 rows, 1 attempts, 90.48ms)
2025-11-26 16:35:31,970 - src.utils.data_collector - ERROR - Error collecting data for VOO: 'MarketDataResult' object has no attribute 'empty'
2025-11-26 16:35:31,970 - src.utils.data_collector - INFO - Fetching data for BND...
2025-11-26 16:35:31,970 - src.utils.market_data - INFO - BND: Fetching from Polygon.io API (primary reliable source)
2025-11-26 16:35:32,127 - src.utils.market_data - INFO - BND: Successfully fetched 120 bars from Polygon.io
2025-11-26 16:35:32,130 - src.utils.market_data - INFO - BND: ✅ Successfully fetched from Polygon.io (120 rows, 1 attempts, 156.93ms)
2025-11-26 16:35:32,130 - src.utils.data_collector - ERROR - Error collecting data for BND: 'MarketDataResult' object has no attribute 'empty'
/Users/igorganapolsky/workspace/git/apps/trading/src/utils/data_collector.py:122: UserWarning: Could not infer format, so each element will be parsed individually, falling back to `dateutil`. To ensure parsing is consistent and as-expected, please specify a format.
  df = pd.read_csv(file, index_col=0, parse_dates=True)
2025-11-26 16:35:32,134 - src.utils.data_collector - INFO - Loaded 34 rows for SPY from 1 files
/Users/igorganapolsky/workspace/git/apps/trading/src/utils/data_collector.py:122: UserWarning: Could not infer format, so each element will be parsed individually, falling back to `dateutil`. To ensure parsing is consistent and as-expected, please specify a format.
  df = pd.read_csv(file, index_col=0, parse_dates=True)
2025-11-26 16:35:32,137 - src.utils.data_collector - INFO - Loaded 34 rows for QQQ from 1 files
/Users/igorganapolsky/workspace/git/apps/trading/src/utils/data_collector.py:122: UserWarning: Could not infer format, so each element will be parsed individually, falling back to `dateutil`. To ensure parsing is consistent and as-expected, please specify a format.
  df = pd.read_csv(file, index_col=0, parse_dates=True)
2025-11-26 16:35:32,139 - src.utils.data_collector - INFO - Loaded 27 rows for VOO from 1 files
======================================================================
Historical Data Collection for Backtesting
======================================================================

Collecting data for symbols: SPY, QQQ, VOO, BND
Lookback period: 252 days (1 year of trading data)

Note: This requires API keys to be configured.
See docs/ENVIRONMENT_VARIABLES.md for setup instructions.


======================================================================
Data collection complete!
======================================================================

Collected files:
  SPY: 34 rows (latest: SPY_2025-11-02.csv)
  QQQ: 34 rows (latest: QQQ_2025-11-02.csv)
  VOO: 27 rows (latest: VOO_2025-11-02.csv)
  BND: No files found (check API keys)

To verify data quality:
  python src/utils/data_collector.py --load SPY
