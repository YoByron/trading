name: Report Trading Status

on:
  workflow_run:
    workflows: ["Daily Trading Execution", "Trigger Daily Trading", "Execute Trading NOW"]
    types:
      - completed

jobs:
  report:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v4
      
      - name: Report Status
        run: |
          echo "=== WORKFLOW STATUS REPORT ===" > status_report.txt
          echo "Timestamp: $(date -u)" >> status_report.txt
          echo "Triggered by: ${{ github.event.workflow_run.name }}" >> status_report.txt
          echo "Status: ${{ github.event.workflow_run.conclusion }}" >> status_report.txt
          echo "Run ID: ${{ github.event.workflow_run.id }}" >> status_report.txt
          echo "URL: ${{ github.event.workflow_run.html_url }}" >> status_report.txt
          cat status_report.txt
      
      - name: Commit Status Report
        run: |
          git config user.name "github-actions[bot]"
          git config user.email "github-actions[bot]@users.noreply.github.com"
          git add status_report.txt || true
          git commit -m "chore: update status report [skip ci]" || true
          git push || true
