# Regime-Based Gate Thresholds Configuration
# Created: December 11, 2025
# Purpose: Different thresholds for different market regimes
# Reference: docs/post-r-and-d-scaling-architecture.md

# VIX-based regime classification
regimes:
  calm:  # VIX < 15
    vix_max: 15
    position_multiplier: 1.2
    max_allocation_pct: 0.30  # Can go to 30% in calm
    sharpe_threshold: 0.6  # More lenient
    daily_loss_limit_pct: 0.03
    options_contracts_max: 20
    strategies_allowed: [momentum, mean_reversion, iron_condor, covered_call]

  normal:  # VIX 15-20
    vix_min: 15
    vix_max: 20
    position_multiplier: 1.0
    max_allocation_pct: 0.25  # Standard 25%
    sharpe_threshold: 0.8
    daily_loss_limit_pct: 0.03
    options_contracts_max: 15
    strategies_allowed: [momentum, mean_reversion, covered_call]

  elevated:  # VIX 20-25
    vix_min: 20
    vix_max: 25
    position_multiplier: 0.7
    max_allocation_pct: 0.20
    sharpe_threshold: 0.8
    daily_loss_limit_pct: 0.02
    options_contracts_max: 10
    strategies_allowed: [mean_reversion, covered_call]

  high:  # VIX 25-35
    vix_min: 25
    vix_max: 35
    position_multiplier: 0.4
    max_allocation_pct: 0.15
    sharpe_threshold: 0.5  # Survival mode - lower bar
    daily_loss_limit_pct: 0.015
    options_contracts_max: 5
    strategies_allowed: [defensive, cash]

  extreme:  # VIX > 35
    vix_min: 35
    vix_max: 100
    position_multiplier: 0.1
    max_allocation_pct: 0.05
    sharpe_threshold: 0.0  # Just survive
    daily_loss_limit_pct: 0.01
    options_contracts_max: 0
    strategies_allowed: [cash, treasuries]
    pause_new_entries: true

# Circuit breaker adjustments by regime
circuit_breakers:
  calm:
    max_consecutive_losses: 5
    research_mode_days: 7
  normal:
    max_consecutive_losses: 4
    research_mode_days: 14
  elevated:
    max_consecutive_losses: 3
    research_mode_days: 14
  high:
    max_consecutive_losses: 2
    research_mode_days: 21
  extreme:
    max_consecutive_losses: 1
    research_mode_days: 30

# Win rate thresholds by regime (for promotion gate)
promotion_thresholds:
  calm:
    min_win_rate: 0.55
    min_sharpe: 1.0
  normal:
    min_win_rate: 0.55
    min_sharpe: 0.8
  elevated:
    min_win_rate: 0.50
    min_sharpe: 0.6
  high:
    min_win_rate: 0.45
    min_sharpe: 0.4
  extreme:
    min_win_rate: 0.40
    min_sharpe: 0.0

# Strategy recommendations by regime
strategy_weights:
  calm:
    momentum: 0.6
    mean_reversion: 0.2
    options: 0.2
  normal:
    momentum: 0.5
    mean_reversion: 0.3
    options: 0.2
  elevated:
    momentum: 0.3
    mean_reversion: 0.4
    options: 0.1
    cash: 0.2
  high:
    momentum: 0.1
    mean_reversion: 0.2
    cash: 0.5
    treasuries: 0.2
  extreme:
    cash: 0.6
    treasuries: 0.4
